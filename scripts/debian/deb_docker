#!/usr/bin/env bash
#
# Post-installation Configuration Scripts
#
# Common Debian based host tasks
# - Install Docker packages
# - Install rancher server

DOCKER_VERSION=17.09

install_docker () {
  apt-get install -y curl
  curl https://releases.rancher.com/install-docker/$DOCKER_VERSION.sh | sh
  cat > /etc/docker/daemon.json << EOF
{
  "dns": ["8.8.8.8", "8.8.4.4"]
}
EOF
  service docker restart
}

install_rancher () {
	docker run -d --restart=unless-stopped --name=rancher-server -p 8080:8080 rancher/server
}

main () {
	install_docker
	install_rancher
	touch deb_docker_done
}


main
